{"ast":null,"code":"import _asyncToGenerator from \"G:\\\\Farsight\\\\Thorsight\\\\Thorsight\\\\ClientApp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@flipsidecrypto/sdk\";\nimport * as i2 from \"@angular/common\";\n\nfunction HomePage_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const action_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate4(\" \", action_r2.block_timestamp, \" \", action_r2.lp_action, \" \", action_r2.pool_name, \" \", action_r2.price_per_unit, \"\\n\");\n  }\n}\n\nfunction HomePage_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const position_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", position_r3.key, \" \", position_r3.val, \"\\n\");\n  }\n}\n\nexport class HomePage {\n  constructor(flipside) {\n    this.flipside = flipside;\n    this.actions = [];\n    this.getActions(\"thor19td8caxpsnmc9qrh8lvlvp985886kunuw24det\");\n  }\n\n  getActions(address) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const sql = \"SELECT block_timestamp, lp_action, pool_name, (rune_amount_usd + asset_amount_usd) / stake_units AS price_per_unit, stake_units AS units FROM flipside_prod_db.thorchain.liquidity_actions WHERE from_address = '\" + address + \"'\";\n      const query = {\n        sql: sql,\n        ttlMinutes: 10,\n        pageNumber: 0,\n        pageSize: 100\n      };\n      var result = yield _this.flipside.query.run(query);\n      _this.actions = result.records.sort((a, b) => {\n        if (a.block_timestamp > b.block_timestamp) {\n          return 1;\n        }\n\n        if (a.block_timestamp == b.block_timestamp) {\n          return 0;\n        }\n\n        return -1;\n      });\n    })();\n  }\n\n}\n\nHomePage.ɵfac = function HomePage_Factory(t) {\n  return new (t || HomePage)(i0.ɵɵdirectiveInject(i1.Flipside));\n};\n\nHomePage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HomePage,\n  selectors: [[\"home-page\"]],\n  decls: 5,\n  vars: 2,\n  consts: [[4, \"ngFor\", \"ngForOf\"]],\n  template: function HomePage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\");\n      i0.ɵɵtext(1, \"Empty\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, HomePage_div_2_Template, 2, 4, \"div\", 0);\n      i0.ɵɵelement(3, \"hr\");\n      i0.ɵɵtemplate(4, HomePage_div_4_Template, 2, 2, \"div\", 0);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.actions);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.openPositions);\n    }\n  },\n  directives: [i2.NgForOf],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJob21lLnBhZ2Uuc2NzcyJ9 */\"]\n});","map":{"version":3,"sources":["G:/Farsight/Thorsight/Thorsight/ClientApp/src/app/core/pages/home/home.page.ts"],"names":["i0","i1","i2","HomePage_div_2_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","action_r2","$implicit","ɵɵadvance","ɵɵtextInterpolate4","block_timestamp","lp_action","pool_name","price_per_unit","HomePage_div_4_Template","position_r3","ɵɵtextInterpolate2","key","val","HomePage","constructor","flipside","actions","getActions","address","sql","query","ttlMinutes","pageNumber","pageSize","result","run","records","sort","a","b","ɵfac","HomePage_Factory","t","ɵɵdirectiveInject","Flipside","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","HomePage_Template","ɵɵtemplate","ɵɵelement","ɵɵproperty","openPositions","directives","NgForOf","styles"],"mappings":"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","sourcesContent":["import * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@flipsidecrypto/sdk\";\r\nimport * as i2 from \"@angular/common\";\r\nfunction HomePage_div_2_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\");\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const action_r2 = ctx.$implicit;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate4(\" \", action_r2.block_timestamp, \" \", action_r2.lp_action, \" \", action_r2.pool_name, \" \", action_r2.price_per_unit, \"\\n\");\r\n} }\r\nfunction HomePage_div_4_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\");\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const position_r3 = ctx.$implicit;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate2(\" \", position_r3.key, \" \", position_r3.val, \"\\n\");\r\n} }\r\nexport class HomePage {\r\n    constructor(flipside) {\r\n        this.flipside = flipside;\r\n        this.actions = [];\r\n        this.getActions(\"thor19td8caxpsnmc9qrh8lvlvp985886kunuw24det\");\r\n    }\r\n    async getActions(address) {\r\n        const sql = \"SELECT block_timestamp, lp_action, pool_name, (rune_amount_usd + asset_amount_usd) / stake_units AS price_per_unit, stake_units AS units FROM flipside_prod_db.thorchain.liquidity_actions WHERE from_address = '\" + address + \"'\";\r\n        const query = {\r\n            sql: sql,\r\n            ttlMinutes: 10,\r\n            pageNumber: 0,\r\n            pageSize: 100\r\n        };\r\n        var result = await this.flipside.query.run(query);\r\n        this.actions = result.records.sort((a, b) => {\r\n            if (a.block_timestamp > b.block_timestamp) {\r\n                return 1;\r\n            }\r\n            if (a.block_timestamp == b.block_timestamp) {\r\n                return 0;\r\n            }\r\n            return -1;\r\n        });\r\n    }\r\n}\r\nHomePage.ɵfac = function HomePage_Factory(t) { return new (t || HomePage)(i0.ɵɵdirectiveInject(i1.Flipside)); };\r\nHomePage.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: HomePage, selectors: [[\"home-page\"]], decls: 5, vars: 2, consts: [[4, \"ngFor\", \"ngForOf\"]], template: function HomePage_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"h1\");\r\n        i0.ɵɵtext(1, \"Empty\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(2, HomePage_div_2_Template, 2, 4, \"div\", 0);\r\n        i0.ɵɵelement(3, \"hr\");\r\n        i0.ɵɵtemplate(4, HomePage_div_4_Template, 2, 2, \"div\", 0);\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.actions);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.openPositions);\r\n    } }, directives: [i2.NgForOf], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJob21lLnBhZ2Uuc2NzcyJ9 */\"] });\r\n"]},"metadata":{},"sourceType":"module"}